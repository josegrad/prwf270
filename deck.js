function Deck(a){this.id=a;this.s=-1;this.t=-1;this.b=-1;this.n=-1;this.x=0;this.y;var c=document.createElement('canvas');c.id=i;c.width=cw+10;c.height=ch+10;c.style.position='absolute';gi('body').appendChild(c);this.c=c}
Deck.prototype.p=function(a,b){this.x=a;this.y=b;this.c.style.left=a+'px';this.c.style.top=b+'px'}
Deck.prototype.d=function(){vbs(this.c);t=this.c.getContext("2d");t.fillStyle='#C4BCA0';t.fillRect(0,0,cw+10,ch+10);t.strokeRect(0,0,cw+10,ch+10)}
Deck.prototype.clr=function(){this.s=-1;this.t=-1;this.b=-1;this.n=-1}
Deck.prototype.ps=function(a){var r=false;if(this.id==0&&u[a].s!=0)return false;if(this.n<1){if(this.t==-1&&u[a].i==6)this.s=u[a].s;if(this.s==u[a].s){var tr=(u[a].i==0&&cs==2)?13:u[a].i;if((tr>=6&&(tr-this.t)==1)||tr==6){this.t=tr;this.n=0;r=true}if((tr<=6&&(this.b-tr)==1)||tr==6){this.b=tr;this.n=0;r=true}if(u[a].i==0&&this.n==0){cs=(tr==0)?1:2;this.n=cs;for(var i=1;i<4;i++){for(var j=0;j<p[i].ac;j++)if(u[p[i].a[j]].s==this.s){u[p[i].a[j]].ci=-1}}for(var i=0;i<4;i++)u[si2j(i,0)].ci=cs==1?1:13}}}if(r){u[a].v=1;u[a].d()}return r}
Deck.prototype.dc=function(){if(this.t>-1){u[si2j(this.s,6)].p(this.x+5,this.y+5);u[si2j(this.s,6)].c.style.zIndex=2;u[si2j(this.s,6)].e=(this.n>0)?0:1;u[si2j(this.s,6)].d();for(var i=7;i<=this.t;i++){var j=(i==13)?0:i;u[si2j(this.s,j)].e=(this.n>0)?0:1;u[si2j(this.s,j)].c.style.zIndex=i;vbs(u[si2j(this.s,j)].c);u[si2j(this.s,j)].p(this.x+5,this.y-ch/2-(i-6)*ds);u[si2j(this.s,j)].d()}for(var i=5;i>=this.b;i--){u[si2j(this.s,i)].e=(this.n>0)?0:1;u[si2j(this.s,i)].c.style.zIndex=8-i;vbs(u[si2j(this.s,i)].c);u[si2j(this.s,i)].p(this.x+5,this.y+ch/2+(6-i)*ds);u[si2j(this.s,i)].d()}}}